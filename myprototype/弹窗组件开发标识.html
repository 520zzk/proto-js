<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style type="text/css">
    *{margin:0px;padding:0px}
    body{height:1000px;}
    .box{width:200px;height:300px;border:1px solid red;background:white;position:absolute;left:300px;z-index:110;}
    .title{background:#999;color:white;height:30px;}
    .close{float:right;width:30px;text-align:center;height:30px;line-height: 30px;cursor:pointer;}
    .close:hover{background: red;}
    .mask{background:rgba(0,0,0,0.5);position:fixed;top:0;left:0;z-index:100;}
    </style>

    <script type="text/javascript">
    window.onload=function(){
        var aBtn = document.getElementsByTagName("input");
        aBtn[0].onclick=function(){
            var d1= new dialog();
            
            d1.init({
                iNow:0,
                W:400,
                H:300,
                title:"登陆",
                dir:'right'
            });
            // console.log(d1);
            
        }
        aBtn[1].onclick=function(){
            var d2= new dialog();
            
            d2.init({
                iNow:1,
                W:150,
                H:300,
                title:"告示",
                dir:'right'
            });
        }
        aBtn[2].onclick=function(){
            var d3= new dialog();
            
            d3.init({
                iNow:2,
                W:300,
                H:400,
                title:"登陆",
                dir:'center',
                mask:'true'
            });
        }
    }

    function dialog(){
        this.box=null;
        this.settings={
            W:300,
            H:300,
            title:'',
            dir:"center",
            mask:'false'
        }
    }
    dialog.prototype.json={};
    dialog.prototype.init=function(pro){
        extend(this.settings , pro);

    //   console.log(this);
        if(this.json[pro.iNow]==undefined){
           this.json[pro.iNow]=true;
        }
        if(this.json[pro.iNow]){
            this.create();
            this.RM();
            if(this.settings.mask=='true'){
            this.createMask();
            }

            this.json[pro.iNow]=false;
        }
    }
    dialog.prototype.create=function(){
        this.box=document.createElement('div');
        this.box.className="box";
        this.box.innerHTML=`
        <div class="title">
            <span>${this.settings.title}</span>
            <span class="close">X</span>
        </div>
        <div class="content">

        </div>
        `;
        document.body.appendChild(this.box);
        this.setData();

    }
    dialog.prototype.createMask=function(){
        var mk=document.createElement('div');
        mk.className="mask";
        mk.style.width=DW() + 'px';                 
        mk.style.height=DH() + 'px';
        document.body.style.overflow='hidden';      //让页面不再下滑
        // document.body.style.position='fixed';
        this.mask=mk;                               //让其全局
        document.body.appendChild(mk);
    }


    dialog.prototype.setData=function(){
        this.box.style.width=this.settings.W+'px';
        this.box.style.height=this.settings.H+'px';
        if(this.settings.dir=='center'){
            this.box.style.left=(DW()-this.settings.W)/2 + 'px';
            this.box.style.top=(DH()-this.settings.H)/2 + 'px';
        }else if(this.settings.dir=='right'){
            this.box.style.left=(DW()-this.settings.W) + 'px';
            this.box.style.top=(DH()-this.settings.H) + 'px';
        }
    }
    dialog.prototype.RM=function(){
        var close=this.box.getElementsByClassName('close')[0];
        var This=this;
        close.onclick=function(){
            document.body.removeChild(This.box);
            This.json[This.settings.iNow]=true;

            if(This.settings.mask=='true'){
                document.body.removeChild(This.mask);
            }
        }
    }

    function extend(obj1,obj2){
        for( attr in obj2){
            obj1[attr]=obj2[attr]
        }
    }
    function DW(){
        return document.documentElement.clientWidth;
    }
    function DH(){
        return document.documentElement.clientHeight;
    }
    </script>
</head>
<body>
    <input type="button" value='弹窗一'>
    <input type="button"" value='弹窗二'>
    <input type="button" value='弹窗三'>
    <!-- <div class="box">
        <div class="title">
            <span>登陆</span>
            <span class="close">X</span>
        </div>
        <div class="content">

        </div>
    </div>
    <div class="mask"></div>
   -->
</body>
</html>